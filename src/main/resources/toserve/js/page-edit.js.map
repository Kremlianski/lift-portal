{"version":3,"sources":["node_modules/browser-pack/_prelude.js","frontend/ts/page-edit.ts"],"names":[],"mappings":"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","file":"page-edit.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\n//declarations\r\ndeclare interface SEvent {\r\n    from: HTMLElement\r\n    to: HTMLElement\r\n    item: HTMLElement\r\n    oldIndex?: number\r\n    newIndex?: number\r\n}\r\n\r\n\r\ninterface SpaceI {\r\n    id: string\r\n    container?: string\r\n    content?: Item[]\r\n    level: number\r\n\r\n}\r\n\r\ninterface Item {\r\n    ctype?: string\r\n    cid?: string\r\n    wid?: string\r\n    wtype?: string\r\n    isNew?: boolean\r\n}\r\n\r\ndeclare function initWidget(item: Element): void\r\n\r\ndeclare function createSpace(item: Element): void\r\n\r\ndeclare function createSpaces():void\r\n\r\ndeclare function initContainer(item: Element): void\r\n\r\ndeclare function initWidget(item: Element): void\r\n\r\ndeclare function loadContainer(id: string):void\r\n\r\ndeclare function loadWidget(id: string):void\r\n\r\ndeclare function save(containers: SpaceI[]):void\r\n\r\n//global functions\r\n\r\n;(<any> window).menuInit = function(id: string):void { \r\n    //alert(id)\r\n}\r\n;(<any> window).initWidget = function(item: Element):void {\r\n\r\n    const containerStr: string = `\r\n        <div class=\"panel-heading\">\r\n            <button class=\"btn btn-primary btn-sm edit-button\">\r\n               <span class=\"glyphicon glyphicon-cog\"></span>\r\n            </button>\r\n            <button class=\"btn btn-primary btn-sm close-button\">\r\n               <span class=\"glyphicon glyphicon-remove\"></span>\r\n            </button>\r\n        </div>\r\n        <div class=\"panel-body\">\r\n            <div id=\"target\"></div>\r\n        </div>\r\n        `\r\n\r\n    const children = $(item).children().get(0)\r\n    $(item)\r\n    .removeAttr('id')\r\n    .removeClass('init-widget')\r\n    .addClass('panel panel-primary widget')\r\n    .html(containerStr)\r\n    .find('.close-button')\r\n    .on('click', function(){\r\n        item.remove()\r\n    })\r\n\r\n    if(children) $(item).find('.panel-body').append(children)\r\n\r\n    $(item).find('.edit-button')\r\n    .on('click', function(){\r\n        const widget = $(item).find('[data-xx-wid]')\r\n        let str = ''\r\n        if(widget.hasClass('xx-new')) {\r\n            str=`&new=1`\r\n        }\r\n        alert(`?id=${widget.attr('data-xx-wid')}${str}`)\r\n        //window.location()\r\n    })\r\n}\r\n;(<any> window).initContainer = function(item: Element):void {\r\n\r\n    const containerStr: string = `\r\n        <div class=\"panel-heading\">\r\n            <button class=\"btn btn-primary btn-sm edit-button\">\r\n               <span class=\"glyphicon glyphicon-cog\"></span>\r\n            </button>\r\n            <button class=\"btn btn-primary btn-sm close-button\">\r\n               <span class=\"glyphicon glyphicon-remove\"></span>\r\n            </button>\r\n        </div>\r\n        <div class=\"panel-body\">\r\n            <div id=\"target\"></div>\r\n        </div>\r\n        `\r\n\r\n    const children = $(item).children().get(0)\r\n    $(item)\r\n    .removeAttr('id')\r\n    .addClass('panel panel-primary widget')\r\n    .html(containerStr)\r\n    .find('.close-button')\r\n    .on('click', function(){\r\n        item.remove()\r\n    })\r\n\r\n    if(children) $(item).find('.panel-body').append(children)\r\n\r\n}\r\n;(<any> window).createSpaces = function():void {\r\n\r\n    $('.space')\r\n    \r\n    .filter(function(){\r\n        return !$(this).hasClass('space-init')\r\n    })\r\n    .addClass('space-init')\r\n    .each(function(){\r\n        createSpace(this)\r\n    })\r\n\r\n}\r\n\r\n;(<any> window).createSpace = function(item:Element):void {\r\n  \r\n    Sortable.create(item, {\r\n        group: {\r\n            name: 'space',\r\n            put: ['editor', 'space']\r\n        } ,\r\n        animation: 100,\r\n        ghostClass: \"ghost\",\r\n        // delay: 10,\r\n        onAdd: function(event: SEvent) {\r\n            if(event.from.id == 'editor-panel') {\r\n                const item = event.item\r\n\r\n                if ($(item).attr('data-xx-con')) {\r\n                    initContainer(item)\r\n                    loadContainer($(item).attr('data-xx-con'))\r\n\r\n                } else if ($(item).attr('data-xx-w')) {\r\n                    initWidget(item)\r\n                    console.log($(item).attr('data-xx-w'))\r\n                    loadWidget('id=' + $(item).attr('data-xx-w'))\r\n\r\n                } else console.log('Error!');\r\n                \r\n\r\n                \r\n            //  createSpaces()\r\n            }\r\n        },\r\n        onUpdate: function(event: SEvent) {\r\n            const ids: string[] = []\r\n            $(event.to).children().each(\r\n                function(){\r\n                    ids.push(this.id)\r\n                })\r\n            // sort(event.to.id, ids)\r\n        },\r\n        onStart: function(event: SEvent) {\r\n            $(event.item)\r\n            .addClass('dragging')\r\n        },\r\n        onEnd: function(event: SEvent) {\r\n            $(event.item)\r\n            .removeClass('dragging')\r\n        },\r\n        draggable: '.widget'\r\n    })\r\n    }\r\n\r\n\r\n//the \"main\" method\r\n;(function(fn:()=>void) {\r\n  if (document.readyState != 'loading') fn()\r\n  else document.addEventListener('DOMContentLoaded', fn)\r\n})(\r\n    function() {\r\n        Sortable.create(document.getElementById('editor-panel'), {\r\n            group: {name:'editor', pull: 'clone'},\r\n            animation: 100,\r\n            ghostClass: \"ghost\"\r\n        })\r\n\r\n        createSpaces()\r\n\r\n        $('#containers').on('change', function(){\r\n            $('#container').attr('data-xx-con', this.value)\r\n        })\r\n\r\n        $('#widgets').on('change', function(){\r\n            $('#widget').attr('data-xx-w', this.value)\r\n        })\r\n\r\n        let spaces:SpaceI[] = []\r\n\r\n        $('#calculate').on('click', function(){\r\n            calculate()\r\n            // console.log(JSON.stringify(spaces))\r\n            save(spaces)\r\n            spaces = []\r\n        })\r\n\r\n        init()\r\n\r\n        function calculate() {\r\n\r\n\r\n            const top = $('.space-top')\r\n\r\n            function setTop(t:JQuery) {\r\n              const id = t.attr('data-xx-sid')\r\n              const container = t.attr('data-xx-c')\r\n              \r\n              const content: Item[] = []\r\n              const level = 0\r\n              \r\n              $('[data-xx-cid], [data-xx-wid]', t.get(0)).each(function(){\r\n                  const element:Element = this\r\n\r\n                  const cid = $(element).attr('data-xx-cid')\r\n                  const ctype = $(element).attr('data-xx-container')\r\n                  const wid = $(element).attr('data-xx-wid')\r\n                  const wtype = $(element).attr('data-xx-widget')\r\n\r\n                  content.push({\r\n                    cid: cid,\r\n                    ctype: ctype,\r\n                    wid: wid,\r\n                    wtype: wtype,\r\n                    isNew: $(element).hasClass('xx-new')\r\n                  })\r\n              })\r\n\r\n              spaces.push({id, container, content, level})\r\n            }\r\n            function findLevel(t: JQuery, l: number) {\r\n              t.addClass('space-in-work')\r\n              .find('.space:not(.space:not(.space-in-work) .space)')\r\n              .each(function(){\r\n                const id = $(this).attr('data-xx-sid')\r\n                const container = $(this).attr('data-xx-c')\r\n                \r\n                const content: Item[] = []\r\n                const level = l + 1\r\n                \r\n                $('[data-xx-cid], [data-xx-wid]', this).each(function(){\r\n                    \r\n                  const element:Element = this\r\n                  const cid = $(element).attr('data-xx-cid')\r\n                  const ctype = $(element).attr('data-xx-container')\r\n                  const wid = $(element).attr('data-xx-wid')\r\n                  const wtype = $(element).attr('data-xx-widget')\r\n\r\n                  content.push({\r\n                    cid: cid,\r\n                    ctype: ctype,\r\n                    wid: wid,\r\n                    wtype: wtype,\r\n                    isNew: $(element).hasClass('xx-new')\r\n                  })\r\n                })\r\n\r\n                spaces.push({id, container, content, level})\r\n\r\n                findLevel($(this), level)\r\n\r\n              })\r\n              t.removeClass('space-in-work')\r\n            }\r\n\r\n            setTop(top)\r\n            findLevel(top, 0)\r\n\r\n        }\r\n\r\n        function init():void {\r\n            $('[data-xx-container]').each(function(){\r\n\r\n                initContainer(this)\r\n                $('#target').remove()\r\n\r\n            })\r\n\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n)\r\n\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJmcm9udGVuZC90cy9wYWdlLWVkaXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQzZDUSxBQUFPLE9BQUMsQUFBUSxXQUFHLFVBQVMsQUFBVTtBQUMxQyxBQUFXLEFBQ2Y7QUFBQyxBQUNBO0FBQU8sQUFBTyxPQUFDLEFBQVUsYUFBRyxVQUFTLEFBQWE7QUFFL0MsUUFBTSxBQUFZLEFBQVcsQUFZeEI7QUFFTCxRQUFNLEFBQVEsV0FBRyxBQUFDLEVBQUMsQUFBSSxBQUFDLE1BQUMsQUFBUSxBQUFFLFdBQUMsQUFBRyxJQUFDLEFBQUMsQUFBQztBQUMxQyxBQUFDLE1BQUMsQUFBSSxBQUFDLE1BQ04sQUFBVSxXQUFDLEFBQUksQUFBQyxNQUNoQixBQUFXLFlBQUMsQUFBYSxBQUFDLGVBQzFCLEFBQVEsU0FBQyxBQUE0QixBQUFDLDhCQUN0QyxBQUFJLEtBQUMsQUFBWSxBQUFDLGNBQ2xCLEFBQUksS0FBQyxBQUFlLEFBQUMsaUJBQ3JCLEFBQUUsR0FBQyxBQUFPLFNBQUU7QUFDVCxBQUFJLGFBQUMsQUFBTSxBQUFFLEFBQ2pCO0FBQUMsQUFBQztBQUVGLEFBQUUsUUFBQyxBQUFRLEFBQUMsVUFBQyxBQUFDLEVBQUMsQUFBSSxBQUFDLE1BQUMsQUFBSSxLQUFDLEFBQWEsQUFBQyxlQUFDLEFBQU0sT0FBQyxBQUFRLEFBQUM7QUFFekQsQUFBQyxNQUFDLEFBQUksQUFBQyxNQUFDLEFBQUksS0FBQyxBQUFjLEFBQUMsZ0JBQzNCLEFBQUUsR0FBQyxBQUFPLFNBQUU7QUFDVCxZQUFNLEFBQU0sU0FBRyxBQUFDLEVBQUMsQUFBSSxBQUFDLE1BQUMsQUFBSSxLQUFDLEFBQWUsQUFBQztBQUM1QyxZQUFJLEFBQUcsTUFBRyxBQUFFO0FBQ1osQUFBRSxZQUFDLEFBQU0sT0FBQyxBQUFRLFNBQUMsQUFBUSxBQUFDLEFBQUMsV0FBQyxBQUFDO0FBQzNCLEFBQUcsQUFBQyxBQUFR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QyxTQUFDLEFBQUksS0FBQyxBQUFnQixBQUFDO0FBRS9DLEFBQU8sNEJBQUMsQUFBSTtBQUNWLEFBQUcsNkJBQUUsQUFBRztBQUNSLEFBQUssK0JBQUUsQUFBSztBQUNaLEFBQUcsNkJBQUUsQUFBRztBQUNSLEFBQUssK0JBQUUsQUFBSztBQUNaLEFBQUssK0JBQUUsQUFBQyxFQUFDLEFBQU8sQUFBQyxTQUFDLEFBQVEsU0FBQyxBQUFRLEFBQUMsQUFDckMsQUFBQyxBQUNKO0FBUGU7QUFPZCxBQUFDO0FBRUYsQUFBTSx1QkFBQyxBQUFJLEtBQUMsRUFBQyxBQUFFLFFBQUUsQUFBUyxzQkFBRSxBQUFPLGtCQUFFLEFBQUssQUFBQyxBQUFDO0FBRTVDLEFBQVMsMEJBQUMsQUFBQyxFQUFDLEFBQUksQUFBQyxPQUFFLEFBQUssQUFBQyxBQUUzQjtBQUFDLEFBQUM7QUFDRixBQUFDLGNBQUMsQUFBVyxZQUFDLEFBQWUsQUFBQyxBQUNoQztBQUFDO0FBRUQsQUFBTSxlQUFDLEFBQUcsQUFBQztBQUNYLEFBQVMsa0JBQUMsQUFBRyxLQUFFLEFBQUMsQUFBQyxBQUVyQjtBQUFDO0FBRUQ7QUFDSSxBQUFDLFVBQUMsQUFBcUIsQUFBQyx1QkFBQyxBQUFJLEtBQUM7QUFFMUIsQUFBYSwwQkFBQyxBQUFJLEFBQUM7QUFDbkIsQUFBQyxjQUFDLEFBQVMsQUFBQyxXQUFDLEFBQU0sQUFBRSxBQUV6QjtBQUFDLEFBQUMsQUFFTjtBQUFDLEFBSUw7QUFBQyxBQUNKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxyXG4vL2RlY2xhcmF0aW9uc1xyXG5kZWNsYXJlIGludGVyZmFjZSBTRXZlbnQge1xyXG4gICAgZnJvbTogSFRNTEVsZW1lbnRcclxuICAgIHRvOiBIVE1MRWxlbWVudFxyXG4gICAgaXRlbTogSFRNTEVsZW1lbnRcclxuICAgIG9sZEluZGV4PzogbnVtYmVyXHJcbiAgICBuZXdJbmRleD86IG51bWJlclxyXG59XHJcblxyXG5cclxuaW50ZXJmYWNlIFNwYWNlSSB7XHJcbiAgICBpZDogc3RyaW5nXHJcbiAgICBjb250YWluZXI/OiBzdHJpbmdcclxuICAgIGNvbnRlbnQ/OiBJdGVtW11cclxuICAgIGxldmVsOiBudW1iZXJcclxuXHJcbn1cclxuXHJcbmludGVyZmFjZSBJdGVtIHtcclxuICAgIGN0eXBlPzogc3RyaW5nXHJcbiAgICBjaWQ/OiBzdHJpbmdcclxuICAgIHdpZD86IHN0cmluZ1xyXG4gICAgd3R5cGU/OiBzdHJpbmdcclxuICAgIGlzTmV3PzogYm9vbGVhblxyXG59XHJcblxyXG5kZWNsYXJlIGZ1bmN0aW9uIGluaXRXaWRnZXQoaXRlbTogRWxlbWVudCk6IHZvaWRcclxuXHJcbmRlY2xhcmUgZnVuY3Rpb24gY3JlYXRlU3BhY2UoaXRlbTogRWxlbWVudCk6IHZvaWRcclxuXHJcbmRlY2xhcmUgZnVuY3Rpb24gY3JlYXRlU3BhY2VzKCk6dm9pZFxyXG5cclxuZGVjbGFyZSBmdW5jdGlvbiBpbml0Q29udGFpbmVyKGl0ZW06IEVsZW1lbnQpOiB2b2lkXHJcblxyXG5kZWNsYXJlIGZ1bmN0aW9uIGluaXRXaWRnZXQoaXRlbTogRWxlbWVudCk6IHZvaWRcclxuXHJcbmRlY2xhcmUgZnVuY3Rpb24gbG9hZENvbnRhaW5lcihpZDogc3RyaW5nKTp2b2lkXHJcblxyXG5kZWNsYXJlIGZ1bmN0aW9uIGxvYWRXaWRnZXQoaWQ6IHN0cmluZyk6dm9pZFxyXG5cclxuZGVjbGFyZSBmdW5jdGlvbiBzYXZlKGNvbnRhaW5lcnM6IFNwYWNlSVtdKTp2b2lkXHJcblxyXG4vL2dsb2JhbCBmdW5jdGlvbnNcclxuXHJcbjsoPGFueT4gd2luZG93KS5tZW51SW5pdCA9IGZ1bmN0aW9uKGlkOiBzdHJpbmcpOnZvaWQgeyBcclxuICAgIC8vYWxlcnQoaWQpXHJcbn1cclxuOyg8YW55PiB3aW5kb3cpLmluaXRXaWRnZXQgPSBmdW5jdGlvbihpdGVtOiBFbGVtZW50KTp2b2lkIHtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXJTdHI6IHN0cmluZyA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbSBlZGl0LWJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY29nXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc20gY2xvc2UtYnV0dG9uXCI+XHJcbiAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCI+XHJcbiAgICAgICAgICAgIDxkaXYgaWQ9XCJ0YXJnZXRcIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgXHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSAkKGl0ZW0pLmNoaWxkcmVuKCkuZ2V0KDApXHJcbiAgICAkKGl0ZW0pXHJcbiAgICAucmVtb3ZlQXR0cignaWQnKVxyXG4gICAgLnJlbW92ZUNsYXNzKCdpbml0LXdpZGdldCcpXHJcbiAgICAuYWRkQ2xhc3MoJ3BhbmVsIHBhbmVsLXByaW1hcnkgd2lkZ2V0JylcclxuICAgIC5odG1sKGNvbnRhaW5lclN0cilcclxuICAgIC5maW5kKCcuY2xvc2UtYnV0dG9uJylcclxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGl0ZW0ucmVtb3ZlKClcclxuICAgIH0pXHJcblxyXG4gICAgaWYoY2hpbGRyZW4pICQoaXRlbSkuZmluZCgnLnBhbmVsLWJvZHknKS5hcHBlbmQoY2hpbGRyZW4pXHJcblxyXG4gICAgJChpdGVtKS5maW5kKCcuZWRpdC1idXR0b24nKVxyXG4gICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY29uc3Qgd2lkZ2V0ID0gJChpdGVtKS5maW5kKCdbZGF0YS14eC13aWRdJylcclxuICAgICAgICBsZXQgc3RyID0gJydcclxuICAgICAgICBpZih3aWRnZXQuaGFzQ2xhc3MoJ3h4LW5ldycpKSB7XHJcbiAgICAgICAgICAgIHN0cj1gJm5ldz0xYFxyXG4gICAgICAgIH1cclxuICAgICAgICBhbGVydChgP2lkPSR7d2lkZ2V0LmF0dHIoJ2RhdGEteHgtd2lkJyl9JHtzdHJ9YClcclxuICAgICAgICAvL3dpbmRvdy5sb2NhdGlvbigpXHJcbiAgICB9KVxyXG59XHJcbjsoPGFueT4gd2luZG93KS5pbml0Q29udGFpbmVyID0gZnVuY3Rpb24oaXRlbTogRWxlbWVudCk6dm9pZCB7XHJcblxyXG4gICAgY29uc3QgY29udGFpbmVyU3RyOiBzdHJpbmcgPSBgXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInBhbmVsLWhlYWRpbmdcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tc20gZWRpdC1idXR0b25cIj5cclxuICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNvZ1wiPjwvc3Bhbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtIGNsb3NlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwidGFyZ2V0XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYFxyXG5cclxuICAgIGNvbnN0IGNoaWxkcmVuID0gJChpdGVtKS5jaGlsZHJlbigpLmdldCgwKVxyXG4gICAgJChpdGVtKVxyXG4gICAgLnJlbW92ZUF0dHIoJ2lkJylcclxuICAgIC5hZGRDbGFzcygncGFuZWwgcGFuZWwtcHJpbWFyeSB3aWRnZXQnKVxyXG4gICAgLmh0bWwoY29udGFpbmVyU3RyKVxyXG4gICAgLmZpbmQoJy5jbG9zZS1idXR0b24nKVxyXG4gICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaXRlbS5yZW1vdmUoKVxyXG4gICAgfSlcclxuXHJcbiAgICBpZihjaGlsZHJlbikgJChpdGVtKS5maW5kKCcucGFuZWwtYm9keScpLmFwcGVuZChjaGlsZHJlbilcclxuXHJcbn1cclxuOyg8YW55PiB3aW5kb3cpLmNyZWF0ZVNwYWNlcyA9IGZ1bmN0aW9uKCk6dm9pZCB7XHJcblxyXG4gICAgJCgnLnNwYWNlJylcclxuICAgIFxyXG4gICAgLmZpbHRlcihmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiAhJCh0aGlzKS5oYXNDbGFzcygnc3BhY2UtaW5pdCcpXHJcbiAgICB9KVxyXG4gICAgLmFkZENsYXNzKCdzcGFjZS1pbml0JylcclxuICAgIC5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY3JlYXRlU3BhY2UodGhpcylcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG47KDxhbnk+IHdpbmRvdykuY3JlYXRlU3BhY2UgPSBmdW5jdGlvbihpdGVtOkVsZW1lbnQpOnZvaWQge1xyXG4gIFxyXG4gICAgU29ydGFibGUuY3JlYXRlKGl0ZW0sIHtcclxuICAgICAgICBncm91cDoge1xyXG4gICAgICAgICAgICBuYW1lOiAnc3BhY2UnLFxyXG4gICAgICAgICAgICBwdXQ6IFsnZWRpdG9yJywgJ3NwYWNlJ11cclxuICAgICAgICB9ICxcclxuICAgICAgICBhbmltYXRpb246IDEwMCxcclxuICAgICAgICBnaG9zdENsYXNzOiBcImdob3N0XCIsXHJcbiAgICAgICAgLy8gZGVsYXk6IDEwLFxyXG4gICAgICAgIG9uQWRkOiBmdW5jdGlvbihldmVudDogU0V2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmKGV2ZW50LmZyb20uaWQgPT0gJ2VkaXRvci1wYW5lbCcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5pdGVtXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQoaXRlbSkuYXR0cignZGF0YS14eC1jb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluaXRDb250YWluZXIoaXRlbSlcclxuICAgICAgICAgICAgICAgICAgICBsb2FkQ29udGFpbmVyKCQoaXRlbSkuYXR0cignZGF0YS14eC1jb24nKSlcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCQoaXRlbSkuYXR0cignZGF0YS14eC13JykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbml0V2lkZ2V0KGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJChpdGVtKS5hdHRyKCdkYXRhLXh4LXcnKSlcclxuICAgICAgICAgICAgICAgICAgICBsb2FkV2lkZ2V0KCdpZD0nICsgJChpdGVtKS5hdHRyKCdkYXRhLXh4LXcnKSlcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgY29uc29sZS5sb2coJ0Vycm9yIScpO1xyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vICBjcmVhdGVTcGFjZXMoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvblVwZGF0ZTogZnVuY3Rpb24oZXZlbnQ6IFNFdmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBpZHM6IHN0cmluZ1tdID0gW11cclxuICAgICAgICAgICAgJChldmVudC50bykuY2hpbGRyZW4oKS5lYWNoKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZHMucHVzaCh0aGlzLmlkKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gc29ydChldmVudC50by5pZCwgaWRzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25TdGFydDogZnVuY3Rpb24oZXZlbnQ6IFNFdmVudCkge1xyXG4gICAgICAgICAgICAkKGV2ZW50Lml0ZW0pXHJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnZHJhZ2dpbmcnKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25FbmQ6IGZ1bmN0aW9uKGV2ZW50OiBTRXZlbnQpIHtcclxuICAgICAgICAgICAgJChldmVudC5pdGVtKVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJylcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYWdnYWJsZTogJy53aWRnZXQnXHJcbiAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbi8vdGhlIFwibWFpblwiIG1ldGhvZFxyXG47KGZ1bmN0aW9uKGZuOigpPT52b2lkKSB7XHJcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT0gJ2xvYWRpbmcnKSBmbigpXHJcbiAgZWxzZSBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4pXHJcbn0pKFxyXG4gICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgU29ydGFibGUuY3JlYXRlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItcGFuZWwnKSwge1xyXG4gICAgICAgICAgICBncm91cDoge25hbWU6J2VkaXRvcicsIHB1bGw6ICdjbG9uZSd9LFxyXG4gICAgICAgICAgICBhbmltYXRpb246IDEwMCxcclxuICAgICAgICAgICAgZ2hvc3RDbGFzczogXCJnaG9zdFwiXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgY3JlYXRlU3BhY2VzKClcclxuXHJcbiAgICAgICAgJCgnI2NvbnRhaW5lcnMnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnI2NvbnRhaW5lcicpLmF0dHIoJ2RhdGEteHgtY29uJywgdGhpcy52YWx1ZSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkKCcjd2lkZ2V0cycpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcjd2lkZ2V0JykuYXR0cignZGF0YS14eC13JywgdGhpcy52YWx1ZSlcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBsZXQgc3BhY2VzOlNwYWNlSVtdID0gW11cclxuXHJcbiAgICAgICAgJCgnI2NhbGN1bGF0ZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNhbGN1bGF0ZSgpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHNwYWNlcykpXHJcbiAgICAgICAgICAgIHNhdmUoc3BhY2VzKVxyXG4gICAgICAgICAgICBzcGFjZXMgPSBbXVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGluaXQoKVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGUoKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgY29uc3QgdG9wID0gJCgnLnNwYWNlLXRvcCcpXHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRUb3AodDpKUXVlcnkpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpZCA9IHQuYXR0cignZGF0YS14eC1zaWQnKVxyXG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHQuYXR0cignZGF0YS14eC1jJylcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICBjb25zdCBjb250ZW50OiBJdGVtW10gPSBbXVxyXG4gICAgICAgICAgICAgIGNvbnN0IGxldmVsID0gMFxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICQoJ1tkYXRhLXh4LWNpZF0sIFtkYXRhLXh4LXdpZF0nLCB0LmdldCgwKSkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50OkVsZW1lbnQgPSB0aGlzXHJcblxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBjaWQgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEteHgtY2lkJylcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY3R5cGUgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEteHgtY29udGFpbmVyJylcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkID0gJChlbGVtZW50KS5hdHRyKCdkYXRhLXh4LXdpZCcpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHd0eXBlID0gJChlbGVtZW50KS5hdHRyKCdkYXRhLXh4LXdpZGdldCcpXHJcblxyXG4gICAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGNpZDogY2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN0eXBlOiBjdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB3aWQ6IHdpZCxcclxuICAgICAgICAgICAgICAgICAgICB3dHlwZTogd3R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNOZXc6ICQoZWxlbWVudCkuaGFzQ2xhc3MoJ3h4LW5ldycpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgc3BhY2VzLnB1c2goe2lkLCBjb250YWluZXIsIGNvbnRlbnQsIGxldmVsfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBmaW5kTGV2ZWwodDogSlF1ZXJ5LCBsOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgICB0LmFkZENsYXNzKCdzcGFjZS1pbi13b3JrJylcclxuICAgICAgICAgICAgICAuZmluZCgnLnNwYWNlOm5vdCguc3BhY2U6bm90KC5zcGFjZS1pbi13b3JrKSAuc3BhY2UpJylcclxuICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEteHgtc2lkJylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9ICQodGhpcykuYXR0cignZGF0YS14eC1jJylcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudDogSXRlbVtdID0gW11cclxuICAgICAgICAgICAgICAgIGNvbnN0IGxldmVsID0gbCArIDFcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgJCgnW2RhdGEteHgtY2lkXSwgW2RhdGEteHgtd2lkXScsIHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDpFbGVtZW50ID0gdGhpc1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBjaWQgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEteHgtY2lkJylcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY3R5cGUgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEteHgtY29udGFpbmVyJylcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkID0gJChlbGVtZW50KS5hdHRyKCdkYXRhLXh4LXdpZCcpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHd0eXBlID0gJChlbGVtZW50KS5hdHRyKCdkYXRhLXh4LXdpZGdldCcpXHJcblxyXG4gICAgICAgICAgICAgICAgICBjb250ZW50LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGNpZDogY2lkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN0eXBlOiBjdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB3aWQ6IHdpZCxcclxuICAgICAgICAgICAgICAgICAgICB3dHlwZTogd3R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNOZXc6ICQoZWxlbWVudCkuaGFzQ2xhc3MoJ3h4LW5ldycpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIHNwYWNlcy5wdXNoKHtpZCwgY29udGFpbmVyLCBjb250ZW50LCBsZXZlbH0pXHJcblxyXG4gICAgICAgICAgICAgICAgZmluZExldmVsKCQodGhpcyksIGxldmVsKVxyXG5cclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIHQucmVtb3ZlQ2xhc3MoJ3NwYWNlLWluLXdvcmsnKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXRUb3AodG9wKVxyXG4gICAgICAgICAgICBmaW5kTGV2ZWwodG9wLCAwKVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKTp2b2lkIHtcclxuICAgICAgICAgICAgJCgnW2RhdGEteHgtY29udGFpbmVyXScpLmVhY2goZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpbml0Q29udGFpbmVyKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAkKCcjdGFyZ2V0JykucmVtb3ZlKClcclxuXHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgIH1cclxuKVxyXG5cclxuIl19"}