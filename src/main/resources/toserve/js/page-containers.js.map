{"version":3,"sources":["node_modules/browser-pack/_prelude.js","frontend/ts/page-containers.ts"],"names":[],"mappings":"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","file":"page-containers.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\n//declarations\r\ndeclare interface SEvent {\r\n    from: HTMLElement\r\n    to: HTMLElement\r\n    item: HTMLElement\r\n    oldIndex?: number\r\n    newIndex?: number\r\n}\r\n\r\n\r\ninterface Space {\r\n    id: string\r\n    container?: string\r\n    content?: string[]\r\n    level: number\r\n\r\n}\r\n\r\ndeclare function createSpace(item: Element): void\r\n\r\ndeclare function createSpaces():void\r\n\r\ndeclare function loadHtml(id: string):void\r\n\r\n\r\n\r\n//global functions\r\n\r\n;(<any> window).createSpaces = function():void {\r\n\r\n    $('.space')\r\n    \r\n    .filter(function(){\r\n        return !$(this).hasClass('space-init')\r\n    })\r\n    .addClass('space-init')\r\n    .each(function(){\r\n        createSpace(this)\r\n    })\r\n\r\n}\r\n\r\n;(<any> window).createSpace = function(item:Element):void {\r\n\r\n    const containerStr: string = `\r\n        <div class=\"panel-heading\">\r\n            <button class=\"btn btn-primary btn-sm close-button\">\r\n               <span class=\"glyphicon glyphicon-remove\"></span>\r\n            </button>\r\n        </div>\r\n        <div class=\"panel-body\">\r\n            <div id=\"target\"></div>\r\n        </div>\r\n        `\r\n        Sortable.create(item, {\r\n            group: {\r\n                name: 'space',\r\n                put: ['editor', 'space']\r\n            } ,\r\n            animation: 100,\r\n            ghostClass: \"ghost\",\r\n            // delay: 10,\r\n            onAdd: function(event: SEvent) {\r\n                if(event.from.id == 'editor-panel') {\r\n                    const item = event.item\r\n        \r\n                    $(item)\r\n                    .removeAttr('id')\r\n                    .addClass('panel panel-primary widget')\r\n                    .html(containerStr)\r\n                    .find('.close-button')\r\n                    .on('click', function(){\r\n                        item.remove()\r\n                    })\r\n\r\n                loadHtml($('#widget').attr('data-xx-w'))\r\n                //  createSpaces()\r\n                }\r\n            },\r\n            onUpdate: function(event: SEvent) {\r\n                const ids: string[] = []\r\n                $(event.to).children().each(\r\n                    function(){\r\n                        ids.push(this.id)\r\n                    })\r\n                // sort(event.to.id, ids)\r\n            },\r\n            onStart: function(event: SEvent) {\r\n                $(event.item)\r\n                .addClass('dragging')\r\n            },\r\n            onEnd: function(event: SEvent) {\r\n                $(event.item)\r\n                .removeClass('dragging')\r\n            },\r\n            draggable: '.widget'\r\n        })\r\n        }\r\n\r\n\r\n//the \"main\" method\r\n;(function(fn:()=>void) {\r\n  if (document.readyState != 'loading') fn()\r\n  else document.addEventListener('DOMContentLoaded', fn)\r\n})(\r\n    function() {\r\n        Sortable.create(document.getElementById('editor-panel'), {\r\n            group: {name:'editor', pull: 'clone'},\r\n            animation: 100,\r\n            ghostClass: \"ghost\"\r\n        })\r\n\r\n        createSpaces()\r\n\r\n        $('#containers').on('change', function(){\r\n            $('#widget').attr('data-xx-w', this.value)\r\n        })\r\n\r\n        let spaces:Space[] = []\r\n\r\n        $('#calculate').on('click', function(){\r\n            calculate()\r\n\r\n            console.log(spaces)\r\n            spaces = []\r\n        })\r\n\r\n        function calculate() {\r\n            $('.space').each(function(){\r\n                const id = $(this).attr('data-xx-sid')\r\n                const container = $(this).attr('data-xx-c')\r\n                \r\n                const content: string[] = []\r\n                const level = 0\r\n                \r\n                $('[data-xx-cid]', this).each(function(){\r\n                   \r\n                   content.push($(this).attr('data-xx-cid'))\r\n                })\r\n\r\n                spaces.push({id, container, content, level})\r\n\r\n               }\r\n            )\r\n        }\r\n        \r\n        \r\n        \r\n    }\r\n)\r\n\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJmcm9udGVuZC90cy9wYWdlLWNvbnRhaW5lcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQzZCUSxBQUFPLE9BQUMsQUFBWSxlQUFHO0FBRTNCLEFBQUMsTUFBQyxBQUFRLEFBQUMsVUFFVixBQUFNLE9BQUM7QUFDSixBQUFNLGVBQUMsQ0FBQyxBQUFDLEVBQUMsQUFBSSxBQUFDLE1BQUMsQUFBUSxTQUFDLEFBQVksQUFBQyxBQUMxQztBQUFDLEFBQUMsT0FDRCxBQUFRLFNBQUMsQUFBWSxBQUFDLGNBQ3RCLEFBQUksS0FBQztBQUNGLEFBQVcsb0JBQUMsQUFBSSxBQUFDLEFBQ3JCO0FBQUMsQUFBQyxBQUVOO0FBQUMsQUFFQTtBQUFPLEFBQU8sT0FBQyxBQUFXLGNBQUcsVUFBUyxBQUFZO0FBRS9DLFFBQU0sQUFBWSxBQUFXLEFBU3hCO0FBQ0QsQUFBUSxhQUFDLEFBQU0sT0FBQyxBQUFJO0FBQ2hCLEFBQUs7QUFDRCxBQUFJLGtCQUFFLEFBQU87QUFDYixBQUFHLGlCQUFFLENBQUMsQUFBUSxVQUFFLEFBQU8sQUFBQyxBQUMzQjtBQUhNO0FBSVAsQUFBUyxtQkFBRSxBQUFHO0FBQ2QsQUFBVSxvQkFBRSxBQUFPO0FBQ25CLEFBQWE7QUFDYixBQUFLLGVBQUUsZUFBUyxBQUFhO0FBQ3pCLEFBQUUsZ0JBQUMsQUFBSyxNQUFDLEFBQUksS0FBQyxBQUFFLE1BQUksQUFBYyxBQUFDLGdCQUFDLEFBQUM7QUFDakMsb0JBQU0sQUFBSSxRQUFHLEFBQUssTUFBQyxBQUFJO0FBRXZCLEFBQUMsa0JBQUMsQUFBSSxBQUFDLE9BQ04sQUFBVSxXQUFDLEFBQUksQUFBQyxNQUNoQixBQUFRLFNBQUMsQUFBNEIsQUFBQyw4QkFDdEMsQUFBSSxLQUFDLEFBQVksQUFBQyxjQUNsQixBQUFJLEtBQUMsQUFBZSxBQUFDLGlCQUNyQixBQUFFLEdBQUMsQUFBTyxTQUFFO0FBQ1QsQUFB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IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXHJcbi8vZGVjbGFyYXRpb25zXHJcbmRlY2xhcmUgaW50ZXJmYWNlIFNFdmVudCB7XHJcbiAgICBmcm9tOiBIVE1MRWxlbWVudFxyXG4gICAgdG86IEhUTUxFbGVtZW50XHJcbiAgICBpdGVtOiBIVE1MRWxlbWVudFxyXG4gICAgb2xkSW5kZXg/OiBudW1iZXJcclxuICAgIG5ld0luZGV4PzogbnVtYmVyXHJcbn1cclxuXHJcblxyXG5pbnRlcmZhY2UgU3BhY2Uge1xyXG4gICAgaWQ6IHN0cmluZ1xyXG4gICAgY29udGFpbmVyPzogc3RyaW5nXHJcbiAgICBjb250ZW50Pzogc3RyaW5nW11cclxuICAgIGxldmVsOiBudW1iZXJcclxuXHJcbn1cclxuXHJcbmRlY2xhcmUgZnVuY3Rpb24gY3JlYXRlU3BhY2UoaXRlbTogRWxlbWVudCk6IHZvaWRcclxuXHJcbmRlY2xhcmUgZnVuY3Rpb24gY3JlYXRlU3BhY2VzKCk6dm9pZFxyXG5cclxuZGVjbGFyZSBmdW5jdGlvbiBsb2FkSHRtbChpZDogc3RyaW5nKTp2b2lkXHJcblxyXG5cclxuXHJcbi8vZ2xvYmFsIGZ1bmN0aW9uc1xyXG5cclxuOyg8YW55PiB3aW5kb3cpLmNyZWF0ZVNwYWNlcyA9IGZ1bmN0aW9uKCk6dm9pZCB7XHJcblxyXG4gICAgJCgnLnNwYWNlJylcclxuICAgIFxyXG4gICAgLmZpbHRlcihmdW5jdGlvbigpe1xyXG4gICAgICAgIHJldHVybiAhJCh0aGlzKS5oYXNDbGFzcygnc3BhY2UtaW5pdCcpXHJcbiAgICB9KVxyXG4gICAgLmFkZENsYXNzKCdzcGFjZS1pbml0JylcclxuICAgIC5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY3JlYXRlU3BhY2UodGhpcylcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG47KDxhbnk+IHdpbmRvdykuY3JlYXRlU3BhY2UgPSBmdW5jdGlvbihpdGVtOkVsZW1lbnQpOnZvaWQge1xyXG5cclxuICAgIGNvbnN0IGNvbnRhaW5lclN0cjogc3RyaW5nID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwYW5lbC1oZWFkaW5nXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtIGNsb3NlLWJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGlkPVwidGFyZ2V0XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYFxyXG4gICAgICAgIFNvcnRhYmxlLmNyZWF0ZShpdGVtLCB7XHJcbiAgICAgICAgICAgIGdyb3VwOiB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnc3BhY2UnLFxyXG4gICAgICAgICAgICAgICAgcHV0OiBbJ2VkaXRvcicsICdzcGFjZSddXHJcbiAgICAgICAgICAgIH0gLFxyXG4gICAgICAgICAgICBhbmltYXRpb246IDEwMCxcclxuICAgICAgICAgICAgZ2hvc3RDbGFzczogXCJnaG9zdFwiLFxyXG4gICAgICAgICAgICAvLyBkZWxheTogMTAsXHJcbiAgICAgICAgICAgIG9uQWRkOiBmdW5jdGlvbihldmVudDogU0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZihldmVudC5mcm9tLmlkID09ICdlZGl0b3ItcGFuZWwnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGV2ZW50Lml0ZW1cclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAkKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2lkJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3BhbmVsIHBhbmVsLXByaW1hcnkgd2lkZ2V0JylcclxuICAgICAgICAgICAgICAgICAgICAuaHRtbChjb250YWluZXJTdHIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5jbG9zZS1idXR0b24nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICBsb2FkSHRtbCgkKCcjd2lkZ2V0JykuYXR0cignZGF0YS14eC13JykpXHJcbiAgICAgICAgICAgICAgICAvLyAgY3JlYXRlU3BhY2VzKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uKGV2ZW50OiBTRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkczogc3RyaW5nW10gPSBbXVxyXG4gICAgICAgICAgICAgICAgJChldmVudC50bykuY2hpbGRyZW4oKS5lYWNoKFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcy5wdXNoKHRoaXMuaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIHNvcnQoZXZlbnQudG8uaWQsIGlkcylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25TdGFydDogZnVuY3Rpb24oZXZlbnQ6IFNFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgJChldmVudC5pdGVtKVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdkcmFnZ2luZycpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRW5kOiBmdW5jdGlvbihldmVudDogU0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkKGV2ZW50Lml0ZW0pXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZHJhZ2dhYmxlOiAnLndpZGdldCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4vL3RoZSBcIm1haW5cIiBtZXRob2RcclxuOyhmdW5jdGlvbihmbjooKT0+dm9pZCkge1xyXG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9ICdsb2FkaW5nJykgZm4oKVxyXG4gIGVsc2UgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuKVxyXG59KShcclxuICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIFNvcnRhYmxlLmNyZWF0ZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdG9yLXBhbmVsJyksIHtcclxuICAgICAgICAgICAgZ3JvdXA6IHtuYW1lOidlZGl0b3InLCBwdWxsOiAnY2xvbmUnfSxcclxuICAgICAgICAgICAgYW5pbWF0aW9uOiAxMDAsXHJcbiAgICAgICAgICAgIGdob3N0Q2xhc3M6IFwiZ2hvc3RcIlxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGNyZWF0ZVNwYWNlcygpXHJcblxyXG4gICAgICAgICQoJyNjb250YWluZXJzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJyN3aWRnZXQnKS5hdHRyKCdkYXRhLXh4LXcnLCB0aGlzLnZhbHVlKVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBzcGFjZXM6U3BhY2VbXSA9IFtdXHJcblxyXG4gICAgICAgICQoJyNjYWxjdWxhdGUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjYWxjdWxhdGUoKVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coc3BhY2VzKVxyXG4gICAgICAgICAgICBzcGFjZXMgPSBbXVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZSgpIHtcclxuICAgICAgICAgICAgJCgnLnNwYWNlJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEteHgtc2lkJylcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9ICQodGhpcykuYXR0cignZGF0YS14eC1jJylcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudDogc3RyaW5nW10gPSBbXVxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSAwXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICQoJ1tkYXRhLXh4LWNpZF0nLCB0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEteHgtY2lkJykpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIHNwYWNlcy5wdXNoKHtpZCwgY29udGFpbmVyLCBjb250ZW50LCBsZXZlbH0pXHJcblxyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9XHJcbilcclxuXHJcbiJdfQ=="}